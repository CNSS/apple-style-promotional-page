<!DOCTYPE html>
<html>

<head>
  <title>Home</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="//unpkg.com/@triggerjs/trigger" defer></script>
  <link rel="stylesheet" href="statics/style.css">
</head>

<body>
  <div class="popup match">
    <div class="popup-container">
      <button class="popup-close-btn">
        <span class="btn-icon close-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
            <path
              d="M12.12,10l4.07-4.06a1.5,1.5,0,1,0-2.11-2.12L10,7.88,5.94,3.81A1.5,1.5,0,1,0,3.82,5.93L7.88,10,3.81,14.06a1.5,1.5,0,0,0,0,2.12,1.51,1.51,0,0,0,2.13,0L10,12.12l4.06,4.07a1.45,1.45,0,0,0,1.06.44,1.5,1.5,0,0,0,1.06-2.56Z">
            </path>
          </svg>
        </span>
      </button>
      <div class="popup-content">
        <h2>参赛机会</h2>
        <p>CTF、AWD、Penetration、ASC…</p>
        <p>众多比赛,总能让你大放光彩。</p>
        <div class="popup-content-card">
          <span>
            我们组队<b>征战于全国甚至全球各大网络安全竞赛</b>, 这些竞赛大多以每月<b>3~4次或更高的频率</b>举办。
          </span>
          <div class="popup-content-card-image">
            <img src="statics/img/comp.jpg" alt="comp" />
          </div>
        </div>

        <div class="popup-content-card">
          <span>
            在<b>全国各地举办的线下比赛</b>一直是拓宽视野、提升技术的重要途径。在凝聚, 所有线下比赛的<b>费用均由公费报销</b>。
          </span>
          <div class="popup-content-card-image">
            <img src="statics/img/reimbursement.jpg" alt="reimbursement" />
          </div>
        </div>

        <div class="popup-content-card">
          <span>
            我们<b>不会强制</b>任何工作室内的成员参加比赛或参加训练，你也可以<b><s>每天睡大觉</s></b>，但CNSS会在你想参与比赛时<b>随时欢迎你</b>。
          </span>
        </div>
      </div>
    </div>
  </div>

  <div class="container title wrapper" tg-name="percent" tg-from="1" tg-to="0.01" tg-edge="inset">
    <div class="container title wrapper" tg-name="rev-percent" tg-from="0" tg-to="0.99" tg-edge="inset">
      <div class="container title sticky">
        <div class="title_content_wrapper">
          <img src="statics/img/logo.svg" class="logo" title="logo" />
          <p>
            <span class="title_abbr c">C</span>
            <span class="title_content ohesion">ohesion&nbsp;</span>
            <span class="title_abbr n">N</span>
            <span class="title_content etwork">etwork&nbsp;</span>
            <span class="title_abbr s">S</span>
            <span class="title_content ecurity">ecurity&nbsp;</span>
            <span class="title_abbr s">S</span>
            <span class="title_content tudio">tudio&nbsp;</span>
            <br />
            <span class="title_chinese">凝聚网络安全工作室</span>
          </p>
        </div>
      </div>
    </div>
  </div>

  <div class="container keywords wrapper" tg-name="percent" tg-from="1" tg-to="0.01" tg-edge="inset">
    <div class="container keywords wrapper" tg-name="rev-percent" tg-from="0" tg-to="0.99" tg-edge="inset">
      <div class="container keywords sticky">
        <b>
          凝聚关键词
        </b>
        <div class="container keywords mask">
          <div data-show class="div keywords">
            <div class="keywords_content">
              <h2>历史悠久</h2>
              <span>凝聚网络安全工作室成立于 2007 年，是成电悠久的工作室文化的代表。我们以电子科技大学本科学生为主力，依托电子科技大学网络空间安全研究中心，旨在培养网络安全领域全面发展的高级人才。</span>
            </div>
          </div>
          <div class="div keywords">
            <div class="keywords_content">
              <h2>成绩斐然</h2>
              <span>CNSS
                发展至今，体系已逐渐完善，不仅在网络安全领域<b>获奖无数</b>，在开发、运维等领域也拥有<b>优异的成绩与深厚的积淀</b>。优良的技术氛围中，历届成员锻炼出了极富竞争力的专业技能。其中不少成员师从安全圈华人顶尖教授，奔赴
                CMU、UCR、OSU、Kaust、清华大学、北京大学、上海交通大学、中国科学院大学等海内外知名高校继续从事安全研究。</span>
            </div>
          </div>
          <div class="div keywords">
            <div class="keywords_content">
              <h2>机遇不断</h2>
              <span>在与外校、企业的合作上，我们<b>机遇不断</b>。我们和腾讯安全科恩实验室、上海交通大学安全研究组
                GoSSIP，中科院信息工程研究所等均有频繁的实习及合作交流。同时，我们与字节跳动、长亭科技、腾讯、阿里巴巴、百度、滴滴等企业有密切合作，享有各大企业丰富的内推指标。</span>
            </div>
          </div>
          <div class="div keywords">
            <div class="keywords_content">
              <h2>最高水平</h2>
              <span>凝聚标志着电子科大本科生在计算机领域的<b>最高水平</b>，一届又一届，我们致力于将严谨的研究氛围、敢于挑战的精神与创新文化不间断地向下传递。</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container cards wrapper" tg-name="percent" tg-from="1" tg-to="0.01" tg-edge="inset">
    <div class="container cards wrapper" tg-name="rev-percent" tg-from="0" tg-to="0.99" tg-edge="inset">
      <div class="container cards sticky">
        <b>
          加入凝聚, 你将可能获得
        </b>
        <div class="container cards list">
          <ul class="card-set">
            <li class="list-items">
              <div class="card">
                <div class="card face" popup="match">
                  <div class="text">
                    <h3>
                      参赛机会
                    </h3>
                    <span>CTF、AWD、Penetration、ASC…</span>
                    <br />
                    <span>众多比赛,总能让你大放光彩。</span>
                  </div>
                  <button class="card-more-btn">
                    <span class="btn-icon more-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                        class="card-cta-modal-button-small-icon card-modal-button-small-icon">
                        <path
                          d="M17.25,8.51H11.5V2.75A1.5,1.5,0,0,0,10,1.25h0a1.5,1.5,0,0,0-1.5,1.5V8.5H2.75a1.5,1.5,0,0,0,0,3H8.5v5.75a1.5,1.5,0,0,0,1.5,1.5h0a1.5,1.5,0,0,0,1.5-1.5V11.5h5.75a1.5,1.5,0,0,0,0-3Z">
                        </path>
                      </svg>
                    </span>
                  </button>
                </div>
                <button class="card button more"></button>
              </div>

            </li>

            <li class="list-items">
              <div class="card">
                <div class="card face" popup="offer">
                  <div class="text">
                    <h3>
                      实习与Offer
                    </h3>
                    <span>大厂或是名校实验室,</span>
                    <br />
                    <span>内推机会多多。</span>
                  </div>
                  <button class="card-more-btn">
                    <span class="btn-icon more-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                        class="card-cta-modal-button-small-icon card-modal-button-small-icon">
                        <path
                          d="M17.25,8.51H11.5V2.75A1.5,1.5,0,0,0,10,1.25h0a1.5,1.5,0,0,0-1.5,1.5V8.5H2.75a1.5,1.5,0,0,0,0,3H8.5v5.75a1.5,1.5,0,0,0,1.5,1.5h0a1.5,1.5,0,0,0,1.5-1.5V11.5h5.75a1.5,1.5,0,0,0,0-3Z">
                        </path>
                      </svg>
                    </span>
                  </button>
                </div>
                <button class="card button more"></button>
              </div>
            </li>

            <li class="list-items">
              <div class="card">
                <div class="card face" popup="money">
                  <div class="text">
                    <h3>
                      奖金与报酬
                    </h3>
                    <span>丰厚的比赛奖金、培训报酬。</span>
                    <br />
                    <span>线下比赛所有费用均由公费报销。</span>
                  </div>
                  <button class="card-more-btn">
                    <span class="btn-icon more-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                        class="card-cta-modal-button-small-icon card-modal-button-small-icon">
                        <path
                          d="M17.25,8.51H11.5V2.75A1.5,1.5,0,0,0,10,1.25h0a1.5,1.5,0,0,0-1.5,1.5V8.5H2.75a1.5,1.5,0,0,0,0,3H8.5v5.75a1.5,1.5,0,0,0,1.5,1.5h0a1.5,1.5,0,0,0,1.5-1.5V11.5h5.75a1.5,1.5,0,0,0,0-3Z">
                        </path>
                      </svg>
                    </span>
                  </button>
                </div>
                <button class="card button more"></button>
              </div>
            </li>

            <li class="list-items">
              <div class="card">
                <div class="card face" popup="train">
                  <div class="text">
                    <h3>
                      内部训练场
                    </h3>
                    <span>想提升自己?</span>
                    <br />
                    <span>内部训练平台满足你!</span>
                    <br />
                    <br />
                    <span style="font-style:italic; opacity: 0.8;">P.S. 我们并不会强制工作室内的成员参加比赛或参加训练,
                      但CNSS会在你想参与比赛时随时欢迎你。</span>
                  </div>
                  <button class="card-more-btn">
                    <span class="btn-icon more-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                        class="card-cta-modal-button-small-icon card-modal-button-small-icon">
                        <path
                          d="M17.25,8.51H11.5V2.75A1.5,1.5,0,0,0,10,1.25h0a1.5,1.5,0,0,0-1.5,1.5V8.5H2.75a1.5,1.5,0,0,0,0,3H8.5v5.75a1.5,1.5,0,0,0,1.5,1.5h0a1.5,1.5,0,0,0,1.5-1.5V11.5h5.75a1.5,1.5,0,0,0,0-3Z">
                        </path>
                      </svg>
                    </span>
                  </button>
                </div>
                <button class="card button more"></button>
              </div>
            </li>

            <li class="list-items">
              <div class="card">
                <div class="card face" popup="family">
                  <div class="text">
                    <h3>
                      志同道合的好友们
                    </h3>
                    <span>最重要的是认识我们大家</span>
                    <br />
                    <span>一起交流技术、聚餐、玩桌游、玩游戏和好友们</span>
                  </div>
                  <button class="card-more-btn">
                    <span class="btn-icon more-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                        class="card-cta-modal-button-small-icon card-modal-button-small-icon">
                        <path
                          d="M17.25,8.51H11.5V2.75A1.5,1.5,0,0,0,10,1.25h0a1.5,1.5,0,0,0-1.5,1.5V8.5H2.75a1.5,1.5,0,0,0,0,3H8.5v5.75a1.5,1.5,0,0,0,1.5,1.5h0a1.5,1.5,0,0,0,1.5-1.5V11.5h5.75a1.5,1.5,0,0,0,0-3Z">
                        </path>
                      </svg>
                    </span>
                  </button>
                </div>
                <button class="card button more"></button>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</body>

<script>
  // 解决直接用 triggerjs 会闪烁的问题
  const title_chinese = document.getElementsByClassName("title_chinese")[0];
  const titleWrapper = document.getElementsByClassName("container title wrapper")[0];
  document.addEventListener('scroll', (e) => {
    let scrolled = titleWrapper.style.getPropertyValue('--percent');
    console.log(scrolled)
    if (scrolled > 1) {
      scrolled = 1
    } else if (scrolled < 0) {
      scrolled = 0
    }
    title_chinese.style.setProperty('--perc', `${scrolled * 100}%`)
  })

  // 切换关键词
  const keywordsWrapper = document.getElementsByClassName("container keywords wrapper")[0];
  document.addEventListener('scroll', (e) => {
    let scrolled = 1 - keywordsWrapper.style.getPropertyValue('--percent');
    console.log(scrolled)
    if (scrolled > 1) {
      scrolled = 1
    } else if (scrolled < 0) {
      scrolled = 0
    }
    let keywords = document.getElementsByClassName("div keywords");
    if (keywords.length == 0) {
      return;
    }
    let select = Math.floor(scrolled * keywords.length);
    let up = null;
    for (let i = 0; i < keywords.length; i++) {
      if (keywords[i].hasAttribute('data-show')) {
        show = i;
      }
    }

    for (let i = 0; i < select; i++) {
      if (!keywords[i].hasAttribute['data-up']) {
        keywords[i].setAttribute('data-up', '');
      }
      if (keywords[i].hasAttribute('data-show')) {
        keywords[i].removeAttribute('data-show');
      }
    }

    for (let i = select; i < keywords.length; i++) {
      if (keywords[i].hasAttribute('data-up')) {
        keywords[i].removeAttribute('data-up');
      }
      if (keywords[i].hasAttribute('data-show')) {
        keywords[i].removeAttribute('data-show');
      }
    }

    // if (up !== null) {
    //   keywords[up].removeAttribute('data-up');
    // }
    // if (show !== null) {
    //   keywords[show].removeAttribute('data-show');
    //   keywords[show].setAttribute('data-up', '');
    // r
    keywords[select].setAttribute('data-show', '');
  })

  // const cardSet = document.getElementsByClassName("card-set")[0];
  // cardSet.addEventListener('scroll', (e) => {
  //   [].slice.call(cardSet.children).forEach(function (ele, index) {
  //     console.log(ele);
  //     console.log(ele.getBoundingClientRect().left);
  //     console.log(cardSet.getBoundingClientRect().left);
  //     if (Math.abs(ele.getBoundingClientRect().left - cardSet.getBoundingClientRect().left) < 10) {
  //
  //     } else {
  //     }
  //   });
  // })

  const popupContainers = document.getElementsByClassName("popup-container");
  for (let i = 0; i < popupContainers.length; i++) {
    popupContainers[i].addEventListener('click', (e) => {
      e.stopPropagation();
    })
  }


  function popup(popupElement) {
    popupElement.style.display = "block";
    this.setTimeout(() => {
      popupElement.style.opacity = 1;
    }, 0);

    // set overflow:hidden to body and html
    document.body.style.overflow = "hidden";
    document.documentElement.style.overflow = "hidden";

    // add close event
    function eventClose(popupElement) {
      popupElement.style.opacity = 0;
      this.setTimeout(() => {
        popupElement.style.display = "none";
      }, 400);
      // remove overflow:hidden
      document.body.style.overflow = "";
      document.documentElement.style.overflow = "";
    }

    popupElement.getElementsByClassName("popup-close-btn")[0].addEventListener('click', eventClose.bind(this, popupElement));
    popupElement.addEventListener('click', eventClose.bind(this, popupElement));
  }

  // Card List-items add popup onclick event
  const listItems = document.getElementsByClassName("list-items");
  for (let i = 0; i < listItems.length; i++) {
    let popupName = listItems[i].getElementsByClassName("card face")[0].getAttribute("popup");
    console.log(popupName);
    let popupElement = document.getElementsByClassName("popup " + popupName)[0];
    listItems[i].addEventListener('click', popup.bind(this, popupElement));
  }
</script>

</html>
