<!DOCTYPE html>
<html>

<head>
  <title>Home</title>
  <script src="//unpkg.com/@triggerjs/trigger" defer></script>
  <link rel="stylesheet" href="statics/style.css">
</head>

<body>
  <div class="container title wrapper" tg-name="percent" tg-from="1" tg-to="0.01" tg-edge="inset">
    <div class="container title wrapper" tg-name="rev-percent" tg-from="0" tg-to="0.99" tg-edge="inset">
      <div class="container title sticky">
        <div class="title_content_wrapper">
          <img src="statics/img/logo.svg" class="logo" title="logo" />
          <p>
            <span class="title_abbr c">C</span>
            <span class="title_content ohesion">ohesion&nbsp;</span>
            <span class="title_abbr n">N</span>
            <span class="title_content etwork">etwork&nbsp;</span>
            <span class="title_abbr s">S</span>
            <span class="title_content ecurity">ecurity&nbsp;</span>
            <span class="title_abbr s">S</span>
            <span class="title_content tudio">tudio&nbsp;</span>
            <br />
            <span class="title_chinese">凝聚网络安全工作室</span>
          </p>
        </div>
      </div>
    </div>
  </div>

  <div class="container keywords wrapper" tg-name="percent" tg-from="1" tg-to="0.01" tg-edge="inset">
    <div class="container keywords wrapper" tg-name="rev-percent" tg-from="0" tg-to="0.99" tg-edge="inset">
      <div class="container keywords sticky">
        <b>
          凝聚关键词
        </b>
        <div class="container keywords mask">
          <div data-show class="div keywords">
            <div class="keywords_content">
              <h2>历史悠久</h2>
              <span>凝聚网络安全工作室成立于 2007 年，是成电悠久的工作室文化的代表。我们以电子科技大学本科学生为主力，依托电子科技大学网络空间安全研究中心，旨在培养网络安全领域全面发展的高级人才。</span>
            </div>
          </div>
          <div class="div keywords">
            <div class="keywords_content">
              <h2>成绩斐然</h2>
              <span>CNSS
                发展至今，体系已逐渐完善，不仅在网络安全领域<b>获奖无数</b>，在开发、运维等领域也拥有<b>优异的成绩与深厚的积淀</b>。优良的技术氛围中，历届成员锻炼出了极富竞争力的专业技能。其中不少成员师从安全圈华人顶尖教授，奔赴
                CMU、UCR、OSU、Kaust、清华大学、北京大学、上海交通大学、中国科学院大学等海内外知名高校继续从事安全研究。</span>
            </div>
          </div>
          <div class="div keywords">
            <div class="keywords_content">
              <h2>机遇不断</h2>
              <span>在与外校、企业的合作上，我们<b>机遇不断</b>。我们和腾讯安全科恩实验室、上海交通大学安全研究组
                GoSSIP，中科院信息工程研究所等均有频繁的实习及合作交流。同时，我们与字节跳动、长亭科技、腾讯、阿里巴巴、百度、滴滴等企业有密切合作，享有各大企业丰富的内推指标。</span>
            </div>
          </div>
          <div class="div keywords">
            <div class="keywords_content">
              <h2>最高水平</h2>
              <span>凝聚标志着电子科大本科生在计算机领域的<b>最高水平</b>，一届又一届，我们致力于将严谨的研究氛围、敢于挑战的精神与创新文化不间断地向下传递。</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container cards wrapper" tg-name="percent" tg-from="1" tg-to="0.01" tg-edge="inset">
    <div class="container cards wrapper" tg-name="rev-percent" tg-from="0" tg-to="0.99" tg-edge="inset">
      <div class="container cards sticky">
        <b>
          加入凝聚, 你将可能获得
        </b>
        <div class="container cards list">
          <ul class="card-set">
            <li class="list-items">
              <div class="card">
                <div class="card face" match>
                  <div class="text">
                    <h3>
                      参赛机会
                    </h3>
                    <span>CTF、AWD、Penetration、ASC…</span>
                    <br />
                    <span>众多比赛,总能让你大放光彩。</span>
                  </div>
                </div>
                <button class="card button more"></button>
              </div>
            </li>

            <li class="list-items">
              <div class="card">
                <div class="card face" offer>
                  <div class="text">
                    <h3>
                      实习与Offer
                    </h3>
                    <span>大厂或是名校实验室,</span>
                    <br />
                    <span>内推机会多多。</span>
                  </div>
                </div>
                <button class="card button more"></button>
              </div>
            </li>

            <li class="list-items">
              <div class="card">
                <div class="card face" money>
                  <div class="text">
                    <h3>
                      奖金与报酬
                    </h3>
                    <span>丰厚的比赛奖金、培训报酬。</span>
                    <br />
                    <span>线下比赛所有费用均由公费报销。</span>
                  </div>
                </div>
                <button class="card button more"></button>
              </div>
            </li>

            <li class="list-items">
              <div class="card">
                <div class="card face" train>
                  <div class="text">
                    <h3>
                      内部训练场
                    </h3>
                    <span>想提升自己?</span>
                    <br />
                    <span>内部训练平台满足你!</span>
                    <br />
                    <br />
                    <span style="font-style:italic; opacity: 0.8;">P.S. 我们并不会强制工作室内的成员参加比赛或参加训练,
                      但CNSS会在你想参与比赛时随时欢迎你。</span>
                  </div>
                </div>
                <button class="card button more"></button>
              </div>
            </li>

            <li class="list-items">
              <div class="card">
                <div class="card face" family>
                  <div class="text">
                    <h3>
                      志同道合的好友们
                    </h3>
                    <span>最重要的是认识我们大家</span>
                    <br />
                    <span>一起交流技术、聚餐、玩桌游、玩游戏和好友们</span>
                  </div>
                </div>
                <button class="card button more"></button>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</body>

<script>
  // 解决直接用 triggerjs 会闪烁的问题
  const title_chinese = document.getElementsByClassName("title_chinese")[0];
  const titleWrapper = document.getElementsByClassName("container title wrapper")[0];
  document.addEventListener('scroll', (e) => {
    let scrolled = titleWrapper.style.getPropertyValue('--percent');
    console.log(scrolled)
    if (scrolled > 1) {
      scrolled = 1
    } else if (scrolled < 0) {
      scrolled = 0
    }
    title_chinese.style.setProperty('--perc', `${scrolled * 100}%`)
  })

  // 切换关键词
  const keywordsWrapper = document.getElementsByClassName("container keywords wrapper")[0];
  document.addEventListener('scroll', (e) => {
    let scrolled = 1 - keywordsWrapper.style.getPropertyValue('--percent');
    console.log(scrolled)
    if (scrolled > 1) {
      scrolled = 1
    } else if (scrolled < 0) {
      scrolled = 0
    }
    let keywords = document.getElementsByClassName("div keywords");
    if (keywords.length == 0) {
      return;
    }
    let select = Math.floor(scrolled * keywords.length);
    let up = null;
    for (let i = 0; i < keywords.length; i++) {
      if (keywords[i].hasAttribute('data-show')) {
        show = i;
      }
    }

    for (let i = 0; i < select; i++) {
      if (!keywords[i].hasAttribute['data-up']) {
        keywords[i].setAttribute('data-up', '');
      }
      if (keywords[i].hasAttribute('data-show')) {
        keywords[i].removeAttribute('data-show');
      }
    }

    for (let i = select; i < keywords.length; i++) {
      if (keywords[i].hasAttribute('data-up')) {
        keywords[i].removeAttribute('data-up');
      }
      if (keywords[i].hasAttribute('data-show')) {
        keywords[i].removeAttribute('data-show');
      }
    }

    // if (up !== null) {
    //   keywords[up].removeAttribute('data-up');
    // }
    // if (show !== null) {
    //   keywords[show].removeAttribute('data-show');
    //   keywords[show].setAttribute('data-up', '');
    // r
    keywords[select].setAttribute('data-show', '');
  })

  // const cardSet = document.getElementsByClassName("card-set")[0];
  // cardSet.addEventListener('scroll', (e) => {
  //   [].slice.call(cardSet.children).forEach(function (ele, index) {
  //     console.log(ele);
  //     console.log(ele.getBoundingClientRect().left);
  //     console.log(cardSet.getBoundingClientRect().left);
  //     if (Math.abs(ele.getBoundingClientRect().left - cardSet.getBoundingClientRect().left) < 10) {
  //
  //     } else {
  //     }
  //   });
  // })
</script>

</html>
